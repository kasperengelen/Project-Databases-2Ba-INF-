{% extends 'layout.html' %}

{% block body %}

	<div class="jumbotron" style="padding: 1%;">
		<div class="row">
			<div class="col-sm-3 text-left">
				<a href="{{ url_for('dataset_pages.view_dataset_home', dataset_id=dataset_info.setid) }}"
				class="btn btn-primary">Tables</a>
			</div>
			<div class="col-sm-6 text-center">
				<h2>{{ dataset_info.name }}</h2>
				<p>Raw Data</p>
			</div>
		</div>
	</div>

	<div class="xs-center">
		<!--ENTRYCOUNT-->
		<div class="col-sm-3 text-left">
		</br>
			{% from "includes/_formhelpers.html" import render_field %}
			<form id="entrycount_form" method="post" action="{{ url_for('dataset_pages.set_session_rowcount') }}">
				{{ entrycount_form.hidden_tag() }}
				<div class="form-group" style="width: 30%;">
					{{render_field(entrycount_form.entry_count, class_="form-control")}}
			    </div>
			</form>
		</div>
		<!--ENTRYCOUNT-->
		<div class="col-sm-6 text-center" style="overflow-x: auto;">
	   		<ul class="pagination">
	   			{% if page_indices|length > 1 %}
	    			{% for index in page_indices %}
	    				{% if index == "..." %}
	    					<li class="page-item hidden-xs"><a class="page-link" style="color: black;">...</a></li>
	    				{% else %}
	    					{% if index|int == current_page %}
	    						<style>
	    							.active {
	    								color: red !important;
	    							}
	    						</style>
		    					<li class="page-item active"><a class="page-link" href="{{ url_for('dataset_pages.view_dataset_table', dataset_id=dataset_info.setid, tablename=table_name, page_nr=index) }}" style="color: black;"">
		    						{{ index }}</a></li>
		    				{% else %}
		    					<li class="page-item"><a class="page-link" href="{{ url_for('dataset_pages.view_dataset_table', dataset_id=dataset_info.setid, tablename=table_name, page_nr=index) }}" style="color: black;"">
		    						{{ index }}</a></li>
	    					{% endif %}
	    				{% endif %}
	    			{% endfor %}
	    		{% else %}
		    			<li class="page-item active"><a class="page-link" style="color: black;"">
			    						{{ page_indices[0] }}</a></li>
		    	{% endif %}

    		</ul>	
    	</div>
	</div>

	<div class="text-center">
		<style>
			table {
       			border-collapse: collapse;
        		width: 20%;
        		float:left;
				padding:3px;
				border-radius: 3px;
				}

	        td, th {
	         	font-size: 15px;
	            text-align: left;
	            padding: 8px;
	        }

	        table thead {
	        	background-color: lightgrey;
	        }

	        table tbody tr:nth-child(even) {
	        	background-color: #eaeaea;
	        }

	        .dataTables_filter {
	        	display: none;
	        }

		</style>
		<div>
			{{ table_data|safe }}
		</div>
		<script>
			$(document).ready( function () {
    			$('#mytable').DataTable( {
    				scrollX: true,
    				scrollY: true,
    				paging: false,
    				lengthChange: false,
    				bInfo: false
    			} );
    		} );

    		var $rows = $('#mytable tbody tr');
			$('#searchInput').keyup(function() {
			    var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
			    
			    $rows.show().filter(function() {
			        var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
			        return !~text.indexOf(val);
			    }).hide();

			});
		</script>
	</div>

{% endblock %}