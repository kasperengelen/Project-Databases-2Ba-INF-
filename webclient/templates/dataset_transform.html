{% extends 'layout.html' %}

{% block body %}
	<div class="jumbotron text-center" style="padding: 1%">
		<div class="pull-right text-center">
			<a href="{{ url_for('dataset_pages.manage_dataset', dataset_id=dataset_info.id) }}" class="btn btn-primary">Manage</a>
			</br>
			</br>
			<a href="{{ url_for('dataset_pages.edit_perms_dataset', dataset_id=dataset_info.id) }}" class="btn btn-primary">Permissions</a>
		</div>

		<div class="text-center">
			<h2>Dataset: {{ dataset_info.displayName }}</h2>
			<p>{{ dataset_info.description }}</p>	
		</div>
	</div>    		

    <div class="jumbotron">
    	<div class="text-center">
    		{% for index in page_indices %}
    			{% if index == "..." %}
    				<p style="display: inline-block;">...</p>
    			{% else %}
					<p style="display: inline-block;"><a style="color: black;"
						href="{{ url_for('dataset_pages.manage_dataset', dataset_id=dataset_info.id, tablename=table, page_nr=index) }}">
							{{ index }}</a></p>	
    			{% endif %}
    			
    		{% endfor %}
    	</div>    		

		<div class="pull-right" style="display: inline-block;">
			<input type="text" id="input" placeholder="Search Page No" style="border-style: solid; border-width: 1px; border-radius: 3px;"/>
			<button onclick="page_search()"><i class="glyphicon glyphicon-arrow-right"></i></button>

			<script type="text/javascript">
			function page_search(){
			    window.location.href = '/dataset/{{ dataset_info.id }}/{{ table_name }}/' + document.getElementById('input').value;
			 }
			</script>
		</div>
	</div>	

	<div class="jumbotron" style="padding: 1%;">
		{% from "includes/_formhelpers.html" import render_field %}
		<form method="post" action="{{ url_for('dataset_pages.transform_findreplace', dataset_id=dataset_info.id, tablename=table_name) }}">
		{{ findrepl_form.csrf_token }}
		<div class="form-group" style="width: 20%; display: inline-block;">
			{{render_field(findrepl_form.select_attr, class_="form-control")}}
		</div>
		<div class="form-group" style="width: 30%; display: inline-block;">
			{{render_field(findrepl_form.search, class_="form-control", placeholder="Searchterm")}}
		</div>
		<div class="form-group" style="width: 30%; display: inline-block;">
			{{render_field(findrepl_form.replacement, class_="form-control", placeholder="Replacement")}}  
		</div>
		<p style="display: inline-block;"><input type="submit" id="findrepl" class="btn btn-primary" value="Find & Replace"></p>
		</form>

		<form method="post" action="{{ url_for('dataset_pages.deleteattr', dataset_id=dataset_info.id, tablename=table_name) }}">
		{{ delete_form.csrf_token }}
		<div class="form-group" style="width: 30%; display: inline-block;">
			{{render_field(delete_form.select_attr, class_="form-control")}}
		</div>
		<p style="display: inline-block;"><input type="submit" id="delete" class="btn btn-primary" value="Delete Attribute"></p>
		</form>
	</div>	

	<div class="text-center">
		<style>
			table {
       			border-collapse: collapse;
        		width: 20%;
        		float:left;
				padding:3px;
				}

	        td, th {
	         	font-size: 15px;
	            text-align: left;
	            padding: 8px;
	            background-color: white;
	        }
		</style>
		{{ table_data|safe }}
	</div>

	

{% endblock %}