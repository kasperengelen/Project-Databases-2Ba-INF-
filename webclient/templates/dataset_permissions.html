{% extends 'layout.html' %}

{% block body %}

	<div class="jumbotron text-center" style="padding: 1%;">
		<h2>Permissions</h2>
	</div>

	<div class="jumbotron col-sm-12">
		<div class="text-center">
			<h3>Add/Remove User</h3>
			</br>
		</div>

		<div>
			{% from "includes/_formhelpers.html" import render_field %}
			<form method="post" action="/dataset/{{ setid }}/add_user">
			{{ form.csrf_token }}
			<div class="form-group" style="width: 40%; display: inline-block;">
				{{render_field(form.email, class_="form-control")}}
			</div>
			<div class="form-group" style="width: 20%; display: inline-block;">
				{{render_field(form.permission_type, class_="form-control")}}
			</div>
			<div style="display: inline-block;">
				<p><input type="submit" class="btn btn-primary" value="Add User" ></p>
			</div>
			</form>
		</div>

		<table>			
			{% with user_list = admin_list + write_list + read_list %}
				{% if user_list %}
					<tr>
						<th>Email</th>
						<th>Permission</th>
						<th>Remove</th>
					</tr>
					{% for user in user_list %}
						<tr>
							<td>{{ user.email.data }}</td>
							<td>{{ user.permission_type.data }}</td>
							<td>{% from "includes/_formhelpers.html" import render_field %}
								<form method="post" action="/dataset/{{ setid }}/remove_user">
								{{ form.csrf_token }}
								{{render_field(form.hidden_tag, class_="form-control")}}
								<label for="remove" class="glyphicon glyphicon-remove"></label>
								<input id="remove" style="visibility: hidden" type="submit"></form></td>
						</tr>
					{% endfor %}
				{% else %}
					<p>no users</p>
				{% endif %}
			{% endwith %}
			
		</table>
	</div>




	</div>
{% endblock %}